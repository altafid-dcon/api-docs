<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API Reference - Altafid API Documentation</title>
    <link rel="stylesheet" href="assets/css/style.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="container">
            <div class="nav-brand">
                <h1>Altafid API</h1>
            </div>
            <ul class="nav-menu">
                <li><a href="index.html">Home</a></li>
                <li><a href="quickstart.html">Quick Start</a></li>
                <li><a href="docs.html" class="active">Documentation</a></li>
                <li><a href="https://github.com/yourusername/altafid-api-docs" target="_blank">GitHub</a></li>
            </ul>
        </div>
    </nav>

    <!-- Content -->
    <div class="container" style="padding: 3rem 20px;">
        <div class="doc-layout">
            <!-- Sidebar -->
            <aside class="doc-sidebar">
                <h3>Documentation</h3>
                <ul>
                    <li><a href="#overview">Overview</a></li>
                    <li><a href="#authentication">Authentication</a></li>
                    <li><a href="#contacts">Contacts</a></li>
                    <li><a href="#tenant-staff">Tenant Staff</a></li>
                    <li><a href="#tasks">Tasks</a></li>
                    <li><a href="#error-handling">Error Handling</a></li>
                </ul>
            </aside>

            <!-- Main Content -->
            <main class="doc-content">
                <h1 id="overview">Altafid API Documentation</h1>
                
                <p>The Altafid API provides programmatic access to manage contacts, tasks, accounts, and notes within the Altafid platform. This RESTful API uses standard HTTP methods and returns JSON responses.</p>

                <div class="callout info">
                    <strong>Base URL:</strong> <code>https://api.altafid.dev.altafid.net</code><br>
                    <strong>Environment:</strong> UAT (Development)
                </div>

                <h2 id="authentication">Authentication</h2>
                <p>The Altafid API uses token-based authentication with access and refresh tokens. All authenticated API requests require a Bearer token and additional headers for tenant context.</p>

                <h3>Authentication Flow</h3>
                <ol>
                    <li><strong>Login</strong> - Obtain access and refresh tokens</li>
                    <li><strong>Use Access Token</strong> - Include in API requests</li>
                    <li><strong>Refresh Token</strong> - Get new access token when expired</li>
                    <li><strong>Logout</strong> - Invalidate tokens</li>
                </ol>

                <h3>Login</h3>
                <p>Authenticate a user and receive access and refresh tokens.</p>
                
                <div class="endpoint-card" style="margin: 1.5rem 0;">
                    <div class="endpoint-method post">POST</div>
                    <div class="endpoint-details">
                        <h4>/api/auth/login</h4>
                        <p>Authenticate and receive access tokens</p>
                    </div>
                </div>

                <p><strong>Request Body:</strong></p>
                <pre><code class="language-json">{
  "username": "user@example.com",
  "password": "your_password"
}</code></pre>

                <p><strong>Example Request:</strong></p>
                <pre><code class="language-bash">curl 'https://api.altafid.dev.altafid.net/api/auth/login' \
  -X POST \
  -H 'Accept: application/json' \
  -H 'Content-Type: application/json' \
  --data-raw '{
    "username": "user@example.com",
    "password": "Password123"
  }'</code></pre>

                <p><strong>Example Response:</strong></p>
                <pre><code class="language-json">{
  "accessToken": "eyJhbGciOiJIUzI1NiJ9...",
  "refreshToken": "eyJhbGciOiJIUzI1NiJ9...",
  "tokenType": "Bearer",
  "expiresIn": 86400,
  "user": {
    "id": "TS019A25A48E6177E8B989E9AECCA3F6DF",
    "email": "user@example.com",
    "firstName": "John",
    "lastName": "Doe",
    "tenantUuid": "T019A16FF372A70B5A9307B00CE85E4DA",
    "tenantCode": "CONPAT_UAT",
    "roles": ["TENANT_ADMIN", "ADMIN", "MANAGER", "USER"],
    "permissions": ["READ_SETTINGS", "CREATE_REPORT", ...]
  }
}</code></pre>

                <h4>Response Fields</h4>
                <table>
                    <thead>
                        <tr>
                            <th>Field</th>
                            <th>Type</th>
                            <th>Description</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>accessToken</code></td>
                            <td>string</td>
                            <td>JWT access token (valid for 24 hours)</td>
                        </tr>
                        <tr>
                            <td><code>refreshToken</code></td>
                            <td>string</td>
                            <td>JWT refresh token (used to get new access token)</td>
                        </tr>
                        <tr>
                            <td><code>tokenType</code></td>
                            <td>string</td>
                            <td>Token type (always "Bearer")</td>
                        </tr>
                        <tr>
                            <td><code>expiresIn</code></td>
                            <td>integer</td>
                            <td>Token expiration time in seconds</td>
                        </tr>
                        <tr>
                            <td><code>user</code></td>
                            <td>object</td>
                            <td>User information and permissions</td>
                        </tr>
                    </tbody>
                </table>

                <h3>Refresh Token</h3>
                <p>Obtain a new access token using a refresh token when the current access token expires.</p>

                <div class="endpoint-card" style="margin: 1.5rem 0;">
                    <div class="endpoint-method post">POST</div>
                    <div class="endpoint-details">
                        <h4>/api/auth/refresh</h4>
                        <p>Refresh access token</p>
                    </div>
                </div>

                <p><strong>Request Body:</strong></p>
                <pre><code class="language-json">{
  "refreshToken": "eyJhbGciOiJIUzI1NiJ9..."
}</code></pre>

                <p><strong>Example Response:</strong></p>
                <pre><code class="language-json">{
  "accessToken": "eyJhbGciOiJIUzI1NiJ9...",
  "refreshToken": "eyJhbGciOiJIUzI1NiJ9...",
  "tokenType": "Bearer",
  "expiresIn": 86400
}</code></pre>

                <div class="callout success">
                    <strong>Best Practices:</strong>
                    <ul style="margin-top: 0.5rem;">
                        <li>Store refresh tokens securely</li>
                        <li>Implement automatic token refresh before expiration</li>
                        <li>Handle 401 errors by attempting token refresh</li>
                    </ul>
                </div>

                <h3>Authenticated Request Headers</h3>
                <p>All API requests (except login, refresh) require these headers:</p>
                <table>
                    <thead>
                        <tr>
                            <th>Header</th>
                            <th>Required</th>
                            <th>Description</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>Authorization</code></td>
                            <td>Yes</td>
                            <td>Bearer token format: <code>Bearer {ACCESS_TOKEN}</code></td>
                        </tr>
                        <tr>
                            <td><code>x-tenant-uuid</code></td>
                            <td>Yes</td>
                            <td>UUID of the tenant/firm</td>
                        </tr>
                        <tr>
                            <td><code>x-user-email</code></td>
                            <td>Yes</td>
                            <td>Email address of the authenticated user</td>
                        </tr>
                        <tr>
                            <td><code>x-user-id</code></td>
                            <td>Yes</td>
                            <td>UUID of the authenticated user</td>
                        </tr>
                        <tr>
                            <td><code>x-user-type</code></td>
                            <td>Yes</td>
                            <td>Type of user (e.g., <code>TENANT_STAFF</code>)</td>
                        </tr>
                    </tbody>
                </table>

                <h3>Token Expiration</h3>
                <ul>
                    <li><strong>Access Token:</strong> Valid for 24 hours (86400 seconds)</li>
                    <li><strong>Refresh Token:</strong> Valid for 7 days (configurable)</li>
                    <li>Store tokens securely and never expose them in client-side code</li>
                    <li>Implement automatic token refresh 5 minutes before expiration</li>
                </ul>

                <h2 id="contacts">Contacts</h2>
                <p>Manage contact information for clients and prospects.</p>

                <h3>List Contacts</h3>
                <p>Retrieve a paginated list of contacts for a specific firm/tenant.</p>

                <div class="endpoint-card" style="margin: 1.5rem 0;">
                    <div class="endpoint-method get">GET</div>
                    <div class="endpoint-details">
                        <h4>/api/contacts/firm/TENANT/{tenantUuid}</h4>
                        <p>List contacts with pagination and search</p>
                    </div>
                </div>

                <h4>Parameters</h4>
                <table>
                    <thead>
                        <tr>
                            <th>Parameter</th>
                            <th>Type</th>
                            <th>Required</th>
                            <th>Description</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>tenantUuid</code></td>
                            <td>string</td>
                            <td>Yes</td>
                            <td>UUID of the tenant/firm</td>
                        </tr>
                        <tr>
                            <td><code>page</code></td>
                            <td>integer</td>
                            <td>No</td>
                            <td>Page number (default: 0)</td>
                        </tr>
                        <tr>
                            <td><code>size</code></td>
                            <td>integer</td>
                            <td>No</td>
                            <td>Page size (default: 20, max: 100)</td>
                        </tr>
                        <tr>
                            <td><code>searchTerm</code></td>
                            <td>string</td>
                            <td>No</td>
                            <td>Search by first name, last name, email, or middle name</td>
                        </tr>
                    </tbody>
                </table>

                <p><strong>Example Request:</strong></p>
                <pre><code class="language-bash">curl 'https://api.altafid.dev.altafid.net/api/contacts/firm/TENANT/T019A16FF372A70B5A9307B00CE85E4DA?page=0&size=20' \
  -H 'accept: application/json' \
  -H 'authorization: Bearer {ACCESS_TOKEN}' \
  -H 'x-tenant-uuid: T019A16FF372A70B5A9307B00CE85E4DA' \
  -H 'x-user-email: user@example.com' \
  -H 'x-user-id: TS019A25A48E6177E8B989E9AECCA3F6DF' \
  -H 'x-user-type: TENANT_STAFF'</code></pre>

                <h2 id="tenant-staff">Tenant Staff</h2>
                <p>Manage staff members within a tenant organization.</p>

                <h3>List All Tenant Staff</h3>
                <p>Retrieve a paginated list of all staff members.</p>

                <div class="endpoint-card" style="margin: 1.5rem 0;">
                    <div class="endpoint-method get">GET</div>
                    <div class="endpoint-details">
                        <h4>/api/tenant-staff/all/paginated</h4>
                        <p>List all staff members with pagination</p>
                    </div>
                </div>

                <h3>Search Tenant Staff</h3>
                <p>Search for staff members by name.</p>

                <div class="endpoint-card" style="margin: 1.5rem 0;">
                    <div class="endpoint-method get">GET</div>
                    <div class="endpoint-details">
                        <h4>/api/tenant-staff/search</h4>
                        <p>Search staff members by name</p>
                    </div>
                </div>

                <h2 id="tasks">Tasks</h2>
                <p>Manage tasks and action items within the platform.</p>

                <h3>Create Task</h3>
                <p>Create a new task in the system.</p>

                <div class="endpoint-card" style="margin: 1.5rem 0;">
                    <div class="endpoint-method post">POST</div>
                    <div class="endpoint-details">
                        <h4>/api/tasks</h4>
                        <p>Create a new task</p>
                    </div>
                </div>

                <p><strong>Request Body:</strong></p>
                <pre><code class="language-json">{
  "taskName": "string",
  "taskType": "EMAIL" | "CALL" | "TODO",
  "queue": "string",
  "status": "OPEN" | "IN_PROGRESS" | "COMPLETED",
  "priority": "LOW" | "MEDIUM" | "HIGH",
  "partnerId": "string",
  "contactId": "string",
  "assignedToId": "string",
  "dueDate": "string (ISO 8601)",
  "description": "string (HTML)",
  "createdById": "string",
  "createdByType": "ADVISOR_STAFF"
}</code></pre>

                <h4>Field Descriptions</h4>
                <table>
                    <thead>
                        <tr>
                            <th>Field</th>
                            <th>Type</th>
                            <th>Required</th>
                            <th>Description</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>taskName</code></td>
                            <td>string</td>
                            <td>Yes</td>
                            <td>Name/title of the task</td>
                        </tr>
                        <tr>
                            <td><code>taskType</code></td>
                            <td>enum</td>
                            <td>Yes</td>
                            <td>Type: EMAIL, CALL, or TODO</td>
                        </tr>
                        <tr>
                            <td><code>queue</code></td>
                            <td>string</td>
                            <td>Yes</td>
                            <td>Queue identifier (e.g., ACCOUNT_ONBOARDING)</td>
                        </tr>
                        <tr>
                            <td><code>status</code></td>
                            <td>enum</td>
                            <td>Yes</td>
                            <td>OPEN, IN_PROGRESS, or COMPLETED</td>
                        </tr>
                        <tr>
                            <td><code>priority</code></td>
                            <td>enum</td>
                            <td>Yes</td>
                            <td>LOW, MEDIUM, or HIGH</td>
                        </tr>
                        <tr>
                            <td><code>assignedToId</code></td>
                            <td>string</td>
                            <td>Yes</td>
                            <td>UUID of the staff member assigned</td>
                        </tr>
                        <tr>
                            <td><code>dueDate</code></td>
                            <td>string</td>
                            <td>Yes</td>
                            <td>Due date in ISO 8601 format</td>
                        </tr>
                    </tbody>
                </table>

                <p><strong>Example Request:</strong></p>
                <pre><code class="language-bash">curl 'https://api.altafid.dev.altafid.net/api/tasks' \
  -H 'accept: application/json' \
  -H 'authorization: Bearer {ACCESS_TOKEN}' \
  -H 'content-type: application/json' \
  -H 'x-tenant-uuid: T019A16FF372A70B5A9307B00CE85E4DA' \
  -H 'x-user-email: user@example.com' \
  -H 'x-user-id: TS019A25A48E6177E8B989E9AECCA3F6DF' \
  -H 'x-user-type: TENANT_STAFF' \
  --data-raw '{
    "taskName": "Follow up on portfolio review",
    "taskType": "EMAIL",
    "queue": "ACCOUNT_ONBOARDING",
    "status": "OPEN",
    "priority": "HIGH",
    "partnerId": "T019A16FF372A70B5A9307B00CE85E4DA",
    "assignedToId": "TS019A25A48E6177E8B989E9AECCA3F6DF",
    "dueDate": "2026-01-29T00:00:00.000Z",
    "description": "&lt;p&gt;Send updated portfolio allocation report&lt;/p&gt;",
    "createdById": "TS019A25A48E6177E8B989E9AECCA3F6DF",
    "createdByType": "ADVISOR_STAFF"
  }'</code></pre>

                <h2 id="error-handling">Error Handling</h2>

                <h3>Standard Error Response</h3>
                <pre><code class="language-json">{
  "error": {
    "code": "ERROR_CODE",
    "message": "Human readable error message",
    "details": {}
  }
}</code></pre>

                <h3>HTTP Status Codes</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Code</th>
                            <th>Description</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>200</td>
                            <td>Success</td>
                        </tr>
                        <tr>
                            <td>201</td>
                            <td>Created</td>
                        </tr>
                        <tr>
                            <td>400</td>
                            <td>Bad Request</td>
                        </tr>
                        <tr>
                            <td>401</td>
                            <td>Unauthorized</td>
                        </tr>
                        <tr>
                            <td>403</td>
                            <td>Forbidden</td>
                        </tr>
                        <tr>
                            <td>404</td>
                            <td>Not Found</td>
                        </tr>
                        <tr>
                            <td>500</td>
                            <td>Internal Server Error</td>
                        </tr>
                    </tbody>
                </table>

                <hr style="margin: 3rem 0; border: none; border-top: 1px solid var(--border-color);">

                <h2>Support</h2>
                <p>For API support, please contact:</p>
                <ul>
                    <li><strong>Email</strong>: support@altafid.com</li>
                    <li><strong>Documentation</strong>: https://docs.altafid.com</li>
                    <li><strong>Status Page</strong>: https://status.altafid.com</li>
                </ul>

                <p style="margin-top: 2rem; color: var(--text-secondary); font-size: 0.875rem;">
                    <em>Last updated: January 28, 2026</em>
                </p>
            </main>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h4>Altafid API</h4>
                    <p>Build powerful integrations with the Altafid platform.</p>
                </div>
                <div class="footer-section">
                    <h4>Documentation</h4>
                    <ul>
                        <li><a href="quickstart.html">Quick Start</a></li>
                        <li><a href="docs.html">API Reference</a></li>
                        <li><a href="#">Changelog</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Support</h4>
                    <ul>
                        <li><a href="mailto:support@altafid.com">Email Support</a></li>
                        <li><a href="https://status.altafid.com">Status Page</a></li>
                        <li><a href="#">Terms of Service</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Connect</h4>
                    <ul>
                        <li><a href="https://github.com/altafid">GitHub</a></li>
                        <li><a href="#">Twitter</a></li>
                        <li><a href="#">LinkedIn</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2026 Altafid. All rights reserved.</p>
            </div>
        </div>
    </footer>
</body>
</html>
